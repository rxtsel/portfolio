---
import type { iProject } from '@/types'
import ArrowTr from '@/icons/ArrowTr.astro'
import Github from '@/icons/Github.astro'
import Lock from '@/icons/Lock.astro'

export interface Props {
  props: iProject
}

import { getI18N } from '@/i18n'

const { currentLocale } = Astro
const i18n = getI18N({ currentLocale })

const { props } = Astro.props
const { title, titleEn, url, gh, description, descriptionEn, tags } = props

// translations
const titleT = titleEn && currentLocale === 'en' ? titleEn : title
const descriptionT = currentLocale === 'en' ? descriptionEn : description
---

<article class='flex flex-col rounded-md border border-neutral-800 p-4'>
  <header class='mb-2 flex items-center justify-between text-cWhite'>
    {
      url ? (
        <a href={url} target='_blank' class='group text-xl font-medium'>
          <div class='flex items-center space-x-2 transition-colors duration-300 ease-in  hover:text-cBlue'>
            <h3>{titleT}</h3>
            <div class='size-3 inline-block text-cAccent transition-all duration-300 ease-in group-hover:-translate-y-[1px] group-hover:translate-x-[1px] group-hover:text-cBlue'>
              <ArrowTr />
            </div>
          </div>
        </a>
      ) : (
        <h3 class='text-xl font-medium'>{titleT}</h3>
      )
    }

    <div class='flex items-center space-x-3'>
      {
        gh ? (
          <a
            href={gh}
            target='_blank'
            title={i18n.messages.repository}
            aria-label={i18n.messages.repository}
          >
            <div class='text-cWhite transition-colors duration-300 ease-in hover:text-cBlue size-6'>
              <Github />
            </div>
          </a>
        ) : (
          <div
            class='text-cWhite transition-colors duration-300 ease-in hover:text-cBlue size-7'
            title={i18n.messages.private}
          >
            <Lock />
          </div>
        )
      }
    </div>
  </header>

  <p class='text-cAccent flex-grow'>{descriptionT}</p>

  <footer class='mt-3 flex items-center justify-between text-cWhite'>
    <div class='flex items-center gap-2 flex-wrap'>
      {
        tags?.sort().map((tag: string) => (
          <p
            class='truncate rounded-md border border-neutral-800 bg-neutral-900 px-2 py-1 font-mono text-xs'
            title={tag}
          >
            {tag}
          </p>
        ))
      }
    </div>
  </footer>
</article>
