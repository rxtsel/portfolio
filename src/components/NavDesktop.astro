---
import { LANGUAGES, ROUTES, SOCIALS } from '@/constants/routes'
import Logo from '@/icons/Logo.astro'
import TranslateIcon from '@/icons/Translate.astro'
import LinkedinIcon from '@/icons/Linkedin.astro'
import TwitterIcon from '@/icons/Twitter.astro'
import GithubIcon from '@/icons/Github.astro'
---

<nav class='flex w-full max-w-6xl mx-auto items-center justify-between'>
  <a
    href={ROUTES.home.path}
    class='h-16 w-16 flex-grow max-w-36'
    aria-label='logo of the website rxtel.dev'
  >
    <Logo />
  </a>

  <ul class='text-cWhite flex space-x-4 uppercase'>
    <li>
      <a
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        aria-label={ROUTES.home.name}
        href={ROUTES.home.path}>{ROUTES.home.name}</a
      >
    </li>
    <li>
      <a
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        aria-label={ROUTES.aboutMe.name}
        href={ROUTES.aboutMe.path}>{ROUTES.aboutMe.name}</a
      >
    </li>
    <li>
      <a
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        aria-label={ROUTES.portfolio.name}
        href={ROUTES.portfolio.path}>{ROUTES.portfolio.name}</a
      >
    </li>
    <li>
      <a
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        aria-label={ROUTES.contact.name}
        href={ROUTES.contact.path}>{ROUTES.contact.name}</a
      >
    </li>
  </ul>

  <ul class='text-cWhite flex space-x-4 flex-shrink-0'>
    <li class='w-6 h-6 relative lang-btn-desktop'>
      <label
        class='lang-desktop hover:text-cBlue order-1 text-cWhite transition-colors duration-300 ease-in size-6 cursor-pointer'
      >
        <input type='checkbox' class='check-lang-desktop' />
        <TranslateIcon />
      </label>

      <ul
        id='lang-options-desktop'
        class='text-cWhite grid place-content-start uppercase absolute transform left-0 right-0 mx-auto w-max p-2 rounded-md bg-cPaper shadow-md z-10'
      >
        <li class='size-full z-10'>
          <a
            class='text-cWhite hover:text-cBlue hover:bg-cBlack px-10 py-2 rounded transition-colors duration-300 ease-in h-full w-full flex place-items-center gap-2'
            href={LANGUAGES.ES.path}
            aria-label='Change language'
          >
            {LANGUAGES.ES.name}
          </a>
        </li>
        <li class='size-full'>
          <a
            class='text-cWhite hover:text-cBlue hover:bg-cBlack px-10 py-2 rounded transition-colors duration-300 ease-in h-full w-full flex place-items-center gap-2'
            href={LANGUAGES.EN.path}
          >
            {LANGUAGES.EN.name}
          </a>
        </li>
      </ul>
    </li>

    <li class='w-6 h-6'>
      <a
        href={SOCIALS.twitter}
        target='_blank'
        aria-label='Twitter'
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        ><TwitterIcon /></a
      >
    </li>
    <li class='w-6 h-6'>
      <a
        href={SOCIALS.linkedin}
        target='_blank'
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        aria-label='Linkedin'><LinkedinIcon /></a
      >
    </li>
    <li class='w-6 h-6'>
      <a
        href={SOCIALS.github}
        target='_blank'
        aria-label='Github'
        class='text-cWhite hover:text-cBlue transition-colors duration-300 ease-in'
        ><GithubIcon /></a
      >
    </li>
  </ul>
</nav>

<style>
  .check-lang-desktop {
    display: none;
  }

  #lang-options-desktop {
    opacity: 0;
    visibility: hidden;
    transition: all 600ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  :has(.check-lang-desktop:checked) #lang-options-desktop {
    animation: slide linear both;
    visibility: visible;
    @apply translate-y-[5px] opacity-100;
  }

  :has(.check-lang-desktop:checked) .lang-desktop {
    @apply text-cBlue;
  }

  @keyframes colorActive {
    to {
      @apply stroke-cBlue;
    }
  }
</style>

<script>
  const $langBtn = document.querySelector('.lang-btn-desktop') as HTMLElement
  const $langCheckbox = document.querySelector(
    '.check-lang-desktop'
  ) as HTMLInputElement

  $langBtn.addEventListener('click', () => {
    if ($langCheckbox.checked) {
      window.document.body.addEventListener('click', (e) => {
        if (
          !e.target.closest('.lang-btn-desktop') &&
          !e.target.closest('.lang-desktop')
        ) {
          $langCheckbox.checked = false
        }
      })
    }
  })
</script>
